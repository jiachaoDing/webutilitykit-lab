name = "webutilitykit-lab"
main = "src/index.ts"
compatibility_date = "2026-01-02"

# Workers Static Assets: 将 public/ 作为静态资源目录，并通过 env.ASSETS.fetch() 交给边缘分发
assets = { directory = "./public", binding = "ASSETS" }

[vars]
APP_NAME = "webutilitykit-lab"
APP_VERSION = "0.1.0"
#
# 分层爬取配置（每分钟执行一次）：
# - 奇数分钟：爬 3 把热门武器
# - 偶数分钟：爬 2 把热门 + 1 把冷门武器
# - 热门武器（50把）：20 分钟完成一轮
# - 冷门武器（364把）：约 12 小时完成一轮
# - API 调用频率：3 把/分钟（与原配置一致）
HOT_BATCH_SIZE_ODD = "3"   # 奇数分钟：热门武器数量
HOT_BATCH_SIZE_EVEN = "2"  # 偶数分钟：热门武器数量
COLD_BATCH_SIZE = "1"      # 偶数分钟：冷门武器数量

[[d1_databases]]
binding = "DB"
database_name = "webutilitykit-lab-db"
database_id = "d2f50fd6-5410-4913-b7af-19a767e9ce25"

[triggers]
crons = ["* * * * *", "0 3 * * *"]

[[routes]]
pattern = "lab.webutilitykit.com"
custom_domain = true
